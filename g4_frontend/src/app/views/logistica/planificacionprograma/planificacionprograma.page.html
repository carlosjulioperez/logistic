<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title style="color:darkblue;font-weight: bold;" >Planificacion Programa</ion-title>
    <ion-buttons slot="end">
      <ion-button  color="secondary" (click)="nuevo()" >
        <ion-icon slot="start" name="document"></ion-icon>
        Nuevo
      </ion-button>  
      <ion-button   color="primary" (click)="guardar()" >
        <ion-icon slot="start" name="save"></ion-icon>
        GUARDAR
      </ion-button>  
      <ion-button color="success" (click)="excelExportar()" >
        <ion-icon slot="start" name="document-text"></ion-icon>
          EXPORTAR
      </ion-button>
     
    </ion-buttons>
  </ion-toolbar>
</ion-header>
 
<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row>
      <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="6"  size="4" size-lg="4">
        <ion-card>
          <ion-card-content>
            <div class="divcard1">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="calendar" color="primary"></ion-icon>
                </div>
                <span>Seleccione No. de Aguaje :</span> 
              </div>
              <div class="bloqueTag">
                <!-- 
                  <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idaguaje" (ngModelChange)="onAguajeSelected()"  >
                    <ion-select-option *ngFor="let item of listAguaje" [value]="item.id">{{ item.descripcion }}  No. {{ item.numeroaguaje }}</ion-select-option>
                  </ion-select>    
                -->
                <!-- *ngIf="!objeto.idaguaje"
                <ion-input #codigo *ngIf="!objeto.idaguaje" [(ngModel)]="objeto.idaguaje" (keyup.enter)="buscarAguaje()" [disabled]="!!objeto.idaguaje"></ion-input>-->
                <ion-label class="ion-text-wrap" style="font-size: 11px;"  >{{ objeto.aguaje }} </ion-label>
                <ion-button style="margin-left: 10px;"  (click)="buscarAguaje()" size="small" slot="end" fill="outline" color="primary">
                  <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>               
              </div>
            </div>
            <div class="divcard1">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="rocket" color="primary"></ion-icon>
                </div>
                <span>Fecha de despacho :</span> 
              </div>
              <div class="bloqueTag" >
                <ion-input value="{{ objeto.fechadespacho | date: 'dd/MM/yyyy' }}" id="fechacapacitaciondesde" class="ion-text-end"></ion-input>
                <ion-popover  trigger="fechacapacitaciondesde" size="auto">
                  <ng-template>
                    <ion-datetime locale="es-ES" displayFormat="MMMM D, YYYY" pickerFormat="MMMM D, YYYY"
                     [(ngModel)]="objeto.fechadespacho" presentation="date" (ionChange)="buscarPorFechaDespacho(objeto,'fechadespacho', $event)" > </ion-datetime>
                  </ng-template>
                </ion-popover>
              </div>
            </div>
            <div class="divcard1">
               
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="accessibility" color="primary"></ion-icon>
                </div>
                <span>Cliente :</span> 
              </div>
              <div class="bloqueTag">
                <!-- 
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idcliente"  >
                  <ion-select-option *ngFor="let item of listClientes" [value]="item.id">{{ item.descripcion }} </ion-select-option>
                </ion-select> -->
                <ion-label class="ion-text-wrap" style="font-size: 11px;"  >{{ objeto.cliente }} </ion-label>
                <ion-button style="margin-left: 10px;"  (click)="buscarCliente()" size="small" slot="end" fill="outline" color="primary">
                  <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>             
              </div>
            </div>
            <div class="divcard1">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="calendar-number" color="primary"></ion-icon>
                </div>
                <span>Fecha de arribo a planta(*):</span> 
              </div>
              <div class="bloqueTag">
                <ion-input value="{{ objetodetalle.fechaarriboplanta | date: 'dd/MM/yyyy' }}" id="fechaarriboplanta" class="ion-text-end"></ion-input>
                <ion-popover  trigger="fechaarriboplanta" size="auto">
                  <ng-template>
                    <ion-datetime locale="es-ES" displayFormat="MMMM D, YYYY" pickerFormat="MMMM D, YYYY"
                     [(ngModel)]="objetodetalle.fechaarriboplanta" presentation="date" > </ion-datetime>
                  </ng-template>
                </ion-popover>
              </div>
            </div>
            <div class="divcard1">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="time" color="primary"></ion-icon>
                </div>
                <span>Fecha/hora materiales en campo(*):</span> 
              </div>
              <div class="bloqueTag">
                <ion-input value="{{ objetodetalle.fechamaterialescampo | date: 'dd/MM/yyyy HH:mm:ss' }}" id="fechamaterialescampo" class="ion-text-end"></ion-input>
                <ion-popover trigger="fechamaterialescampo" size="auto">
                  <ng-template>
                    <ion-datetime locale="es-EC"  displayFormat="MMMM D, YYYY" pickerFormat="MMMM D, YYYY"
                      [(ngModel)]="objetodetalle.fechamaterialescampo"  ></ion-datetime>
                  </ng-template>
                </ion-popover> 
              </div>
            </div>
          </ion-card-content>
           
        </ion-card>
      </ion-col> 
      <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="6"  size="4" size-lg="4">
        <ion-card>
        
          <ion-card-content>
             
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="earth" color="primary"></ion-icon>
                </div>
                <span>Origen Pesca :</span> 
              </div>
              <div class="bloqueTag">
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idproveedorpropiedad" >
                  <ion-select-option *ngFor="let item of listPropiedad" [value]="item.id">{{ item.descripcion }}  </ion-select-option>
                </ion-select>
              </div>
            </div>
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="stats-chart" color="primary"></ion-icon>
                </div>
                <span>Proceso :</span> 
              </div>
              <div class="bloqueTag">
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idtipoproceso" (ngModelChange)="onTipoProcesoSelected()" >
                  <ion-select-option *ngFor="let item of listTipoProceso" [value]="item.id">{{ item.descripcion }} </ion-select-option>
                </ion-select>
              </div>
            </div>
            <div class="divcard" *ngIf="objeto.idtipoproceso==2"  >
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="flask" color="primary"></ion-icon>
                </div>
                <span>Quimico :</span> 
              </div>
              <div class="bloqueTag">
                <ion-toggle [(ngModel)]="objeto.quimico" ></ion-toggle> <!--  265px h  (ionChange)="onCheckCambioEstado()"    -->
              </div>
            </div>
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="person-circle" color="primary"></ion-icon>
                </div>
                <span>Proveedor :</span> 
              </div>
              <div class="bloqueTag">
                <!-- <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idproveedor"    >
                  <ion-select-option *ngFor="let item of listProveedor" [value]="item.id">{{ item.descripcion }} </ion-select-option>
                </ion-select>-->
                <ion-label class="ion-text-wrap" style="font-size: 11px;"  >{{ objeto.proveedor }} </ion-label>
                <ion-button style="margin-left: 10px;"  (click)="buscarProveedor()" size="small" slot="end" fill="outline" color="primary">
                  <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>  
              </div>
            </div>
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="globe" color="primary"></ion-icon>
                </div>
                <span>Sector de Pesca  :</span> 
              </div>
              <div class="bloqueTag">
                <!--  
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objetodetalle.idsector"  >
                  <ion-select-option *ngFor="let item of listSector" [value]="item.id">{{ item.descripcion }}  </ion-select-option>
                </ion-select> -->
                <ion-label class="ion-text-wrap" style="font-size: 11px;"  >{{ objetodetalle.sector }} </ion-label>
                <ion-button style="margin-left: 10px;"  (click)="buscarSector()" size="small" slot="end" fill="outline" color="primary">
                  <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>   
              </div>
            </div>
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="image" color="primary"></ion-icon>
                </div>
                <span>Campamento  :</span> 
              </div>
              <div class="bloqueTag">
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objetodetalle.idcampamento" >
                  <ion-select-option *ngFor="let item of listCampamento" [value]="item.id">{{ item.nombre }}  </ion-select-option>
                </ion-select>
              </div>
            </div>
            <div class="divcard">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="boat" color="primary"></ion-icon>
                </div>
                <span>Piscina(*) :</span> 
              </div>
              <div class="bloqueTag">
                <!-- 
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objetodetalle.idpiscina"  >
                  <ion-select-option *ngFor="let item of listPiscina" [value]="item.id">{{ item.descripcion }} </ion-select-option>
                </ion-select>-->
                <ion-label class="ion-text-wrap" style="font-size: 11px;"  >{{ objetodetalle.piscina }} </ion-label>
                <ion-button style="margin-left: 10px;"  (click)="buscarPiscina()" size="small" slot="end" fill="outline" color="primary">
                  <ion-icon slot="icon-only" name="search"></ion-icon>
                </ion-button>  
              </div>
            </div>


          </ion-card-content>
        </ion-card>
      </ion-col>  
      <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="6"  size="4" size-lg="4">
        <ion-card>
          <ion-card-content>
            <div class="divcard2">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="scale" color="primary"></ion-icon>
                </div>
                <span>Gramos(*) :</span> 
              </div>
              <div class="bloqueTag">
                <ion-input [(ngModel)]="objetodetalle.gramaje" label-placement="floating" fill="outline" 
                   type="number" color="primary" ></ion-input>
              </div>
            </div>

            <div class="divcard2">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="scale" color="primary"></ion-icon>
                </div>
                <span>Libras Programadas :</span> 
              </div>
              <div class="bloqueTag">
                <ion-input [(ngModel)]="objetodetalle.cantidadprogramada" color="primary"
                   label-placement="floating" fill="outline"  type="number" ></ion-input>
              </div>
            </div>
            <div class="divcard2">
              <div class="bloqueTag">
                <div class="bloqueTagIcon">
                  <ion-icon name="newspaper" color="primary"></ion-icon>
                </div>
                <span>Observacion :</span> 
              </div>
              <div class="bloqueTag">
                <ion-input label="Observaciones" [(ngModel)]="objetodetalle.observacioncompras"
                   label-placement="floating" fill="outline" placeholder="Digite Observacion...."></ion-input>
              </div>
            </div>

            
          </ion-card-content>
        </ion-card>
      </ion-col> 


    </ion-row>
   <!-- <ion-row>
      <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="6"  size="12" size-lg="12">
        <ion-card>
            <ion-card-content>
                  <ion-input label="Observaciones" [(ngModel)]="objetodetalle.observacioncompras" label-placement="floating" fill="outline" placeholder="Digite alguna Observacion...."></ion-input>
            </ion-card-content>
        </ion-card>
      </ion-col>   
    </ion-row>   -->
  </ion-grid>
 
  <ion-card color="warning"  >
    <ion-grid   >
      <ion-row  >  <!-- size-md="4"  size="3" size-lg="3" -->
        <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="4"  size="4" size-lg="4">
          <ion-item color="warning"  >
            <ion-label>Compradores:</ion-label>
            <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idcomprador"  >
              <ion-select-option *ngFor="let item of listComprador" [value]="item.id">{{ item.apellido }} {{ item.nombre }}   </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>  
        <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="8"  size="8" size-lg="8">
          <ion-row>
            <ion-col class="ion-no-padding">
              <ion-item color="warning" >
                <ion-label style="font-size: 16px;color:darkblue;font-weight: bold;">Libras Aguaje:</ion-label>
                <ion-label style="font-size: 16px;color:darkblue;font-weight: bold;">{{currencyFormatterLabel(librasaguaje)}}</ion-label>
              </ion-item>
            </ion-col>  
            <ion-col class="ion-no-padding">
              <ion-item color="warning"> 
                <ion-label style="font-size: 16px;color:darkblue;font-weight: bold;" >Libras Totales:</ion-label>
                <ion-label style="font-size: 16px;color:darkblue;font-weight: bold;" >{{currencyFormatterLabel(librastotales)}}</ion-label>
              </ion-item>
            </ion-col>  
          </ion-row> 
        </ion-col>  
        <!-- 
        <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="4"  size="5" size-lg="5">
          <ion-row>
            <ion-col class="ion-no-padding">
              <ion-item color="warning">
                <ion-label>Status:</ion-label>
                <ion-select interface="popover" placeHolder="Seleccionar" [(ngModel)]="objeto.idstatus"  >
                  <ion-select-option *ngFor="let item of listStatus" [value]="item.id">{{ item.descripcion }} </ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>  
            <ion-col class="ion-no-padding">
              <ion-item color="warning"> 
                <ion-label>Incluir Fecha Despacho:</ion-label>
                <ion-toggle ></ion-toggle>  
              </ion-item>
            </ion-col>  
          </ion-row>    
        </ion-col>  
        <ion-col class="ion-no-padding" size-xs="12" size-sm="10" size-md="4"  size="4" size-lg="4">
          <ion-row>
            <ion-col class="ion-no-padding">
              <ion-item color="warning" >
                <ion-label style="font-size: 13px;color:darkblue;font-weight: bold;">Libras Aguaje:</ion-label>
                <ion-label style="font-size: 14px;color:darkblue;font-weight: bold;"></ion-label>
              </ion-item>
            </ion-col>  
            <ion-col class="ion-no-padding">
              <ion-item color="warning"> 
                <ion-label style="font-size: 13px;color:darkblue;font-weight: bold;" >Libras Totales:</ion-label>
                <ion-label style="font-size: 14px;color:darkblue;font-weight: bold;" >{{librastotales}}</ion-label>
              </ion-item>
            </ion-col>  
          </ion-row> 
        </ion-col>   -->        
      </ion-row>
    </ion-grid>
  </ion-card>
      
  <ion-row style="height: 100%;">
    <ion-col> 
    
      <div id="container"> <!--  [modules]="modules"   -->
      <ag-grid-angular #agGridDatos   
        style="width: 100%; height: 500px;" 
        class="ag-theme-alpine"
        [gridOptions]="gridOptions"
         
        [rowData]="rowData"        
        [columnDefs]="columnDefs"   
        [defaultColDef]="defaultColDef"
        [pagination]="true"  
        [frameworkComponents]="frameworkComponents"  
        [rowClassRules]="rowClassRules" 
        [overlayLoadingTemplate]="overlayLoadingTemplate"              
        [animateRows]="true"
        [pinnedBottomRowData]="bottomData"              
        (cellValueChanged)="onCellValueChanged($event)"
        (rowEditingStarted)="onRowEditingStarted($event)"
        (rowEditingStopped)="onRowEditingStopped($event)"
        (cellEditingStarted)="onCellEditingStarted($event)"
        (cellEditingStopped)="onCellEditingStopped($event)"
        (gridReady)="onGridReady($event)"
        [overlayNoRowsTemplate]="noRowsTemplate"> 

      </ag-grid-angular>
      </div>
    </ion-col>
  </ion-row>
       

     
   
</ion-content>
